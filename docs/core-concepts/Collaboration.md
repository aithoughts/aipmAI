---
title: CrewAI 中的 Agent 如何协同工作
description: 探讨 CrewAI 框架内 agent 协作的动态，重点关注新集成的功能以增强功能。
---

## 协作基础
!!! note "Agent 交互的核心"
    在 CrewAI 中，协作至关重要，它使 agent 能够结合各自的技能，共享信息，并在任务执行中相互协助，体现出一个真正的合作生态系统。

- **信息共享**: 通过共享数据和发现，确保所有 agent 都能充分了解情况并有效地做出贡献。
- **任务协助**: 允许 agent 向具有特定任务所需专业知识的同伴寻求帮助。
- **资源分配**: 通过在 agent 之间高效分配和共享资源来优化任务执行。

## 用于改进协作的增强属性
`Crew` 类已经通过添加若干属性来支持高级功能：

- **语言模型管理 (`manager_llm`, `function_calling_llm`)**: 管理用于执行任务和工具的语言模型，促进复杂的 agent-工具交互。请注意，虽然 `manager_llm` 对于分层流程是强制性的，以确保正确的执行流程，但 `function_calling_llm` 是可选的，并提供了一个默认值以简化工具交互。
- **自定义管理 Agent (`manager_agent`)**: 允许指定一个自定义 agent 作为管理者，而不是使用 CrewAI 提供的默认管理者。
- **流程 (`process`)**: 定义执行逻辑（例如，顺序、分层）以简化任务分配和执行。
- **详细日志记录 (`verbose`)**: 提供详细的日志记录功能，用于监控和调试目的。它支持整数和布尔类型来指示详细程度。例如，将 `verbose` 设置为 1 可能会启用基本日志记录，而将其设置为 True 则会启用更详细的日志。
- **速率限制 (`max_rpm`)**: 通过限制每分钟的请求数来确保资源的有效利用。设置 `max_rpm` 的准则应考虑任务的复杂性和资源的预期负载。
- **国际化/自定义支持 (`language`, `prompt_file`)**:  方便对内部提示进行全面自定义，增强全局可用性。应清楚记录支持的语言以及使用 `prompt_file` 属性进行自定义的过程。 [文件示例](https://github.com/aithoughts/aipmAI/blob/main/src/crewai/translations/en.json)
- **执行和输出处理 (`full_output`)**: 区分完整输出和最终输出，以便对任务结果进行细致入微的控制。展示输出差异的示例可以帮助理解此属性的实际含义。
- **回调和遥测 (`step_callback`, `task_callback`)**: 集成用于逐步和任务级执行监控的回调，以及用于性能分析的遥测。应清楚解释 `task_callback` 与 `step_callback` 一起用于精细监控的目的和用法。
- **Crew 共享 (`share_crew`)**:  允许与 CrewAI 共享 crew 信息，以便持续改进和训练模型。应概述此功能的隐私影响和好处，包括它如何促进模型改进。
- **使用指标 (`usage_metrics`)**: 存储所有任务执行过程中语言模型 (LLM) 使用情况的所有指标，提供对运营效率和改进领域的洞察。应提供有关访问和解释这些指标以进行性能分析的详细信息。
- **内存使用 (`memory`)**: 指示 crew 是否应使用内存来存储其执行的记忆，从而增强任务执行和 agent 学习。
- **嵌入器配置 (`embedder`)**: 指定 crew 用于理解和生成语言的嵌入器的配置。此属性支持自定义语言模型提供程序。
- **缓存管理 (`cache`)**:  确定 crew 是否应使用缓存来存储工具执行的结果，从而优化性能。
- **输出日志记录 (`output_log_file`)**: 指定用于记录 crew 执行输出的文件路径。

## 委派：分而治之
委派通过允许 agent 智能地分配任务或寻求帮助来增强功能，从而增强 crew 的整体能力。

##  实现协作和委派
设置 crew 涉及定义每个 agent 的角色和能力。CrewAI 无缝地管理它们的交互，确保高效的协作和委派，并提供增强的自定义和监控功能以适应各种运营需求。

## 示例场景
考虑一个 crew，其中有一个负责数据收集的研究员 agent 和一个负责编写报告的作者 agent。高级语言模型管理和流程属性的集成允许更复杂的交互，例如作者将复杂的研究任务委派给研究员或查询特定信息，从而促进无缝的工作流程。

## 结论
在 CrewAI 框架中集成高级属性和功能显着丰富了 agent 协作生态系统。这些增强功能不仅简化了交互，还提供了前所未有的灵活性和控制力，为能够通过智能协作和委派来处理复杂任务的复杂 AI 驱动解决方案铺平了道路。
